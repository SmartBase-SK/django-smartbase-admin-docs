---
title: Translations (i18n)
sidebar_position: 8
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# üåê Translations (i18n Support)

SmartBase Admin provides built-in support for managing translations of model fields using [django-parler](https://github.com/django-parler/django-parler). This includes:

- A **dedicated translations management view** for translating content across all translatable models
- **Translation status indicators** on model detail pages showing which languages are complete
- **Automatic form handling** for translatable model fields in admin views

:::info Prerequisites
- [django-parler](https://github.com/django-parler/django-parler) must be installed
- Your Django project must have multiple languages configured in `settings.LANGUAGES`
- `settings.LANGUAGE_CODE` defines the **main (source) language**
:::

---

## üõ†Ô∏è How It Works

1. **Models** use django-parler's `TranslatedFields` to define which fields are translatable.
2. **Admin classes** extend `SBTranslatableAdmin` instead of `SBAdmin` ‚Äî this automatically adds a translation status widget to the detail page.
3. **`SBAdminTranslationsView`** is registered as a custom view that provides a centralized translation management interface for all translatable models.

---

## üí° Example #1: Translatable Model

Define your model with django-parler's `TranslatedFields`:

```python title="catalog/models.py"
from django.db import models
from parler.models import TranslatableModel, TranslatedFields


class Product(TranslatableModel):
    sku = models.CharField(max_length=50)
    price = models.DecimalField(max_digits=10, decimal_places=2)

    translations = TranslatedFields(
        name=models.CharField(max_length=200),
        description=models.TextField(blank=True),
    )

    def __str__(self):
        return self.safe_translation_getter("name", any_language=True) or self.sku
```

---

## üí° Example #2: SBTranslatableAdmin

Use `SBTranslatableAdmin` instead of `SBAdmin` for translatable models. This automatically:
- Adds a **translation status fieldset** to the detail page (showing which languages are translated)
- Uses `SBTranslatableModelForm` as the form class (handles translated fields in the admin form)

```python title="catalog/sb_admin.py"
from django.contrib import admin

from django_smartbase_admin.admin.admin_base import SBTranslatableAdmin
from django_smartbase_admin.admin.site import sb_admin_site

from catalog.models import Product


@admin.register(Product, site=sb_admin_site)
class ProductSBAdmin(SBTranslatableAdmin):
    model = Product
    sbadmin_list_display = ("name", "sku", "price")
    fieldsets = [
        (None, {"fields": ["name", "description", "sku", "price"]}),
    ]
```

:::warning
If you use a custom form class with `SBTranslatableAdmin`, it **must** extend `SBTranslatableModelForm`:

```python
from django_smartbase_admin.admin.admin_base import SBTranslatableModelForm

class ProductForm(SBTranslatableModelForm):
    class Meta:
        model = Product
        fields = "__all__"
```

Using a form that does not extend `SBTranslatableModelForm` will raise an `ImproperlyConfigured` error.
:::

---

## üí° Example #3: Translations Management View

Register `SBAdminTranslationsView` in your configuration to provide a centralized interface for managing translations across multiple models.

```python title="sb_admin_configuration.py"
from django.conf import settings

from django_smartbase_admin.engine.configuration import SBAdminConfigurationBase, SBAdminRoleConfiguration
from django_smartbase_admin.engine.menu_item import SBAdminMenuItem
from django_smartbase_admin.views.dashboard_view import SBAdminDashboardView
from django_smartbase_admin.views.translations_view import SBAdminTranslationsView


menu_items = [
    SBAdminMenuItem(label="Dashboard", icon="All-application", view_id="dashboard"),
    SBAdminMenuItem(label="Products", icon="Ad-product", view_id="catalog_product"),
    SBAdminMenuItem(label="Categories", icon="List-checkbox", view_id="catalog_category"),
]

registered_views = [
    SBAdminDashboardView(widgets=[], title="Dashboard"),
]

# Only add translations menu when multiple languages are configured
if len(settings.LANGUAGES) > 1:
    menu_items.append(
        SBAdminMenuItem(view_id="translations", icon="Translation")
    )
    registered_views.append(
        SBAdminTranslationsView(
            translations_definition=[
                {
                    "model_path": "catalog.Product",
                    "icon": {
                        "path": "#Ad-product",
                        "class": "bg-success-100 text-success-800",
                    },
                    "fields": ["name", "description"],  # Only these fields will be translatable
                },
                {
                    "model_path": "catalog.Category",
                    "icon": {
                        "path": "#List-checkbox",
                        "class": "bg-warning-100 text-warning-800",
                    },
                    "fields": ["name"],
                },
            ]
        )
    )


_role_config = SBAdminRoleConfiguration(
    default_view=SBAdminMenuItem(view_id="dashboard"),
    menu_items=menu_items,
    registered_views=registered_views,
)


class SBAdminConfiguration(SBAdminConfigurationBase):
    def get_configuration_for_roles(self, user_roles):
        return _role_config
```

---

## üìñ translations_definition Reference

Each entry in the `translations_definition` list configures a translatable model:

| Key | Type | Required | Description |
|-----|------|----------|-------------|
| `model_path` | str | ‚úÖ | Dot-separated path to the model (e.g., `"catalog.Product"`) |
| `fields` | list[str] | No | List of field names to include in the translation view. If omitted, all translated fields are shown |
| `icon` | dict | No | Icon configuration with `path` (SVG sprite reference like `"#Ad-product"`) and `class` (CSS classes for styling) |
| `view_class` | class | No | Custom view class (must extend `ModelTranslationView`). Defaults to `ModelTranslationView` |
| `description` | str | No | Description text shown alongside the model in the translations overview |

---

## üìã Translation Status on Detail Page

When using `SBTranslatableAdmin`, a **Translations** fieldset is automatically appended to the detail page. It displays the translation status for each configured language:

| Status | Icon | Meaning |
|--------|------|---------|
| ‚úÖ Translated | Green check | All translatable fields have been filled for this language |
| ‚ö†Ô∏è Incomplete | Yellow warning | Some translatable fields are filled, but not all |
| ‚ûï Not Translated | Gray plus | No translations exist for this language |

The status widget includes edit links that navigate directly to the translations management view for the selected model and language.

---

## ‚öôÔ∏è Django Settings

Ensure your Django project is configured for multiple languages:

```python title="settings.py"
LANGUAGE_CODE = "en"  # Main (source) language

LANGUAGES = [
    ("en", "English"),
    ("de", "German"),
    ("fr", "French"),
]
```

SmartBase Admin uses `settings.LANGUAGE_CODE` as the main language and `settings.LANGUAGES` to determine available translation languages. The translations view automatically excludes the main language from the list of languages to translate into (since it's the source language).
